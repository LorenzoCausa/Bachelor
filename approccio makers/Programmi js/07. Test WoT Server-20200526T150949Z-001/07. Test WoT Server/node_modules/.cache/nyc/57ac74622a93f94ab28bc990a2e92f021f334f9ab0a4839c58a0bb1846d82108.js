var cov_28xey2jcyg=function(){var path="/Users/riccardo.berta/Drive/Corsi/MEA - Makers a new approach to Electronic Applications/Lecture Notes/08. Unit Testing/code/07. Test WoT Server/routes/measurements.js";var hash="61917380112af6c5a1ce0b4173695c0c32215c70";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/riccardo.berta/Drive/Corsi/MEA - Makers a new approach to Electronic Applications/Lecture Notes/08. Unit Testing/code/07. Test WoT Server/routes/measurements.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:34}},"1":{start:{line:2,column:15},end:{line:2,column:31}},"2":{start:{line:3,column:17},end:{line:3,column:36}},"3":{start:{line:4,column:20},end:{line:4,column:49}},"4":{start:{line:6,column:0},end:{line:26,column:3}},"5":{start:{line:7,column:4},end:{line:25,column:86}},"6":{start:{line:8,column:8},end:{line:8,column:50}},"7":{start:{line:8,column:29},end:{line:8,column:50}},"8":{start:{line:9,column:8},end:{line:9,column:53}},"9":{start:{line:9,column:30},end:{line:9,column:53}},"10":{start:{line:10,column:8},end:{line:10,column:55}},"11":{start:{line:10,column:31},end:{line:10,column:55}},"12":{start:{line:11,column:8},end:{line:11,column:76}},"13":{start:{line:11,column:29},end:{line:11,column:76}},"14":{start:{line:12,column:8},end:{line:12,column:55}},"15":{start:{line:12,column:31},end:{line:12,column:55}},"16":{start:{line:13,column:8},end:{line:13,column:108}},"17":{start:{line:13,column:48},end:{line:13,column:106}},"18":{start:{line:14,column:23},end:{line:14,column:51}},"19":{start:{line:15,column:24},end:{line:20,column:9}},"20":{start:{line:21,column:29},end:{line:21,column:72}},"21":{start:{line:22,column:8},end:{line:22,column:34}},"22":{start:{line:23,column:8},end:{line:23,column:15}},"23":{start:{line:25,column:18},end:{line:25,column:84}},"24":{start:{line:28,column:0},end:{line:28,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:22},end:{line:6,column:23}},loc:{start:{line:6,column:54},end:{line:26,column:1}},line:6}},branchMap:{"0":{loc:{start:{line:8,column:8},end:{line:8,column:50}},type:"if",locations:[{start:{line:8,column:8},end:{line:8,column:50}},{start:{line:8,column:8},end:{line:8,column:50}}],line:8},"1":{loc:{start:{line:9,column:8},end:{line:9,column:53}},type:"if",locations:[{start:{line:9,column:8},end:{line:9,column:53}},{start:{line:9,column:8},end:{line:9,column:53}}],line:9},"2":{loc:{start:{line:10,column:8},end:{line:10,column:55}},type:"if",locations:[{start:{line:10,column:8},end:{line:10,column:55}},{start:{line:10,column:8},end:{line:10,column:55}}],line:10},"3":{loc:{start:{line:11,column:8},end:{line:11,column:76}},type:"if",locations:[{start:{line:11,column:8},end:{line:11,column:76}},{start:{line:11,column:8},end:{line:11,column:76}}],line:11},"4":{loc:{start:{line:12,column:8},end:{line:12,column:55}},type:"if",locations:[{start:{line:12,column:8},end:{line:12,column:55}},{start:{line:12,column:8},end:{line:12,column:55}}],line:12},"5":{loc:{start:{line:13,column:8},end:{line:13,column:108}},type:"if",locations:[{start:{line:13,column:8},end:{line:13,column:108}},{start:{line:13,column:8},end:{line:13,column:108}}],line:13}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},f:{"0":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"61917380112af6c5a1ce0b4173695c0c32215c70"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();const express=(cov_28xey2jcyg.s[0]++,require('express'));const router=(cov_28xey2jcyg.s[1]++,express.Router());const mongoose=(cov_28xey2jcyg.s[2]++,require('mongoose'));const Measurement=(cov_28xey2jcyg.s[3]++,mongoose.model('Measurement'));cov_28xey2jcyg.s[4]++;router.route('/').get(async function(req,res,next){cov_28xey2jcyg.f[0]++;cov_28xey2jcyg.s[5]++;try{cov_28xey2jcyg.s[6]++;if(!req.query.page){cov_28xey2jcyg.b[0][0]++;cov_28xey2jcyg.s[7]++;req.query.page='1';}else{cov_28xey2jcyg.b[0][1]++;}cov_28xey2jcyg.s[8]++;if(!req.query.limit){cov_28xey2jcyg.b[1][0]++;cov_28xey2jcyg.s[9]++;req.query.limit='10';}else{cov_28xey2jcyg.b[1][1]++;}cov_28xey2jcyg.s[10]++;if(!req.query.filter){cov_28xey2jcyg.b[2][0]++;cov_28xey2jcyg.s[11]++;req.query.filter='{}';}else{cov_28xey2jcyg.b[2][1]++;}cov_28xey2jcyg.s[12]++;if(!req.query.sort){cov_28xey2jcyg.b[3][0]++;cov_28xey2jcyg.s[13]++;req.query.sort="{ \"timestamp\": \"desc\" }";}else{cov_28xey2jcyg.b[3][1]++;}cov_28xey2jcyg.s[14]++;if(!req.query.select){cov_28xey2jcyg.b[4][0]++;cov_28xey2jcyg.s[15]++;req.query.select='{}';}else{cov_28xey2jcyg.b[4][1]++;}cov_28xey2jcyg.s[16]++;if(req.query.filter.startsWith("[")){cov_28xey2jcyg.b[5][0]++;cov_28xey2jcyg.s[17]++;req.query.filter="{ \"$or\": "+req.query.filter+" }";}else{cov_28xey2jcyg.b[5][1]++;};const filter=(cov_28xey2jcyg.s[18]++,JSON.parse(req.query.filter));const options=(cov_28xey2jcyg.s[19]++,{select:JSON.parse(req.query.select),sort:JSON.parse(req.query.sort),page:parseInt(req.query.page),limit:parseInt(req.query.limit)});const measurements=(cov_28xey2jcyg.s[20]++,await Measurement.paginate(filter,options));cov_28xey2jcyg.s[21]++;req.result=measurements;cov_28xey2jcyg.s[22]++;next();}catch(err){cov_28xey2jcyg.s[23]++;return res.status(500).json({status:500,message:err.message});};});cov_28xey2jcyg.s[24]++;module.exports=router;